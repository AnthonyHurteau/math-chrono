(self.webpackChunkmath_chrono=self.webpackChunkmath_chrono||[]).push([[733,515],{9515:function(e,t,n){"use strict";n.r(t),n.d(t,{chalkboard:function(){return d},dashboard:function(){return m},default:function(){return f}});var r=n(2791),o=n(6445),i=n(1889),a=n(2455),s=n(1979),c=n(821),l=n(8290),u=n(184),d="chalkboard",m="dashboard",p=(0,a.Z)((function(e){return{baseContainer:function(e){var t;return{padding:"2% calc(2% - 10px) 2% 2%",marginTop:"5%",marginBottom:"2%",height:null!==(t=e.vh)&&void 0!==t?t:"85vh"}},chalkboardContainer:{background:e.palette.chalkboard.background,backgroundAttachment:"local",color:"white",border:"solid",borderColor:"black",borderRadius:e.shape.borderRadius,borderImage:"url(".concat("/math-chrono","/wood.png) 200 / 12px"),borderImageOutset:"8px",overflow:"auto",boxShadow:"0 8px 16px 0 rgba(0,0,0,0.7)",transition:"0.5s","&:hover":{boxShadow:"0 12px 24px 0 rgba(0,0,0,0.7)"},"&::-webkit-scrollbar, & *::-webkit-scrollbar":{background:e.palette.chalkboard.background},"&::-webkit-scrollbar-corner, & *::-webkit-scrollbar-corner":{background:e.palette.chalkboard.background}},dashboardContainer:{marginTop:"0 !important"}}}));function f(e){var t=p(e),n=e.isForm,a=(0,s.Z)((0,l.Z)("dark")),d=(0,r.useCallback)((function(e){return n?e.formWrapper(e.children):e.children}),[n]);return(0,u.jsx)(c.Z,{theme:a,children:(0,u.jsx)(o.Z,{className:"container",children:(0,u.jsxs)(i.ZP,{container:!0,justifyContent:"center",alignItems:"center",children:[(0,u.jsx)(i.ZP,{item:!0,xs:0,sm:2}),(0,u.jsx)(i.ZP,{item:!0,sm:8,children:(0,u.jsx)(d,{formWrapper:function(e){return(0,u.jsx)("form",{children:e})},children:(0,u.jsx)(i.ZP,{container:!0,justifyContent:"center",alignItems:"center",className:"".concat(t.baseContainer," ").concat(e.componentType===m?t.dashboardContainer:t.chalkboardContainer),children:e.component})})}),(0,u.jsx)(i.ZP,{item:!0,xs:0,sm:2})]})})})}},9203:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return Q}});var r=n(9439),o=n(2791),i=n(7762),a=n(1279);function s(e){var t=function(e){var t=[];e.addition&&t.push("+");e.substraction&&t.push("-");e.multiplication&&t.push("*");e.division&&t.push("/");return t}(e);return function(e,t){for(var n=[],r=0;r<e.amount;r++){var o=c(e,t);n.push({id:r+1,operation:o,operationText:m(o)})}return n}(e,t)}function c(e,t){for(var n="",r=0;r<e.operands;r++){n+=l(e),r<e.operands-1&&(n+=u(t))}return n=function(e,t,n){var r=n;(isNaN((0,a.ku)(n))||(0,a.ku)(n)===1/0)&&(r=c(e,t));(0,a.ku)(n)%1!==0&&(r=c(e,t));!e.negativeNumbers&&(0,a.ku)(n)<0&&(r=c(e,t));return r}(e,t,n),n}function l(e){var t;return e.negativeNumbers?(t=d(1,e.maximum).toString(),1===d(0,2)&&(t="(-"+t+")")):e.negativeNumbers||(t=d(1,e.maximum).toString()),t}function u(e){return e[d(0,Number(e.length)-1)]}function d(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1)+e)}function m(e){return e=(e=(e=(e=(e=e.replaceAll("+"," + ")).replaceAll("-"," - ")).replaceAll("( - ","(-")).replaceAll("*"," x ")).replaceAll("/"," \xf7 ")}var p=n(5547),f=n(4767),h=n(4554),x=n(1889),g=n(6151),b=n(890),j=n(2455),v=n(184),w="200px",Z="50px",k=(0,j.Z)((function(e){return{root:function(e){return{position:"relative",height:e.isMobile?Z:w,width:e.isMobile?Z:w}},rootCircle:{fill:"none",stroke:"none"},rootPathElapsed:{strokeWidth:"7px",stroke:e.palette.primary.main},rootLabel:function(e){return{position:"absolute",height:e.isMobile?Z:w,width:e.isMobile?Z:w,top:0,display:"flex",alignItems:"center",justifyContent:"center",fontSize:"48px"}},rootPathRemaining:{strokeWidth:"7px",strokeLinecap:"round",transform:"rotate(90deg)",transformOrigin:"center",transition:"1s linear all",stroke:"currentcolor"},green:{color:e.palette.success.main},orange:{color:"orange"},red:{color:e.palette.error.main},rootSvg:{transform:"scaleX(-1)"}}}));function C(e){var t=k(e),n=Math.floor(e.timeLimit/3),i=Math.floor(e.timeLimit/6),a=(0,o.useMemo)((function(){return{info:{color:"green"},warning:{color:"orange",threshold:n},alert:{color:"red",threshold:i}}}),[n,i]),s=(0,o.useState)(a.info.color),c=(0,r.Z)(s,2),l=c[0],u=c[1],d=(0,o.useState)(283),m=(0,r.Z)(d,2),p=m[0],f=m[1],h=(0,o.useRef)(!1),x=(0,o.useRef)(null),g=(0,o.useRef)(0),b=(0,o.useCallback)((function(){var t=e.timeLeft/e.timeLimit;return t-1/e.timeLimit*(1-t)}),[e.timeLeft,e.timeLimit]),j=(0,o.useCallback)((function(){var e="".concat((283*b()).toFixed(0)," 283");f(e)}),[b]),w=(0,o.useCallback)((function(){var t=a.alert,n=a.warning;e.timeLeft<=t.threshold?u(t.color):e.timeLeft<=n.threshold&&u(n.color)}),[e.timeLeft,a]),Z=(0,o.useCallback)((function(){h.current=!0,x.current=setInterval((function(){g.current++,e.setTimeLeft(e.timeLeft-g.current)}),1e3)}),[e]);return(0,o.useEffect)((function(){j(),w(e.timeLeft),(0===e.timeLeft&&h.current||e.end)&&(clearInterval(x.current),h.current=!1)}),[e.timeLeft,e.end,j,w]),(0,o.useEffect)((function(){e.start&&!h.current&&e.timeLeft>0&&!e.end&&Z()}),[e.start,e.timeLeft,e.end,Z]),(0,v.jsxs)("div",{className:t.root,children:[e.isMobile?null:(0,v.jsx)("svg",{className:t.rootSvg,viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg",children:(0,v.jsxs)("g",{className:t.rootCircle,children:[(0,v.jsx)("circle",{className:t.rootPathElapsed,cx:"50",cy:"50",r:"45"}),(0,v.jsx)("path",{id:"base-timer-path-remaining",strokeDasharray:p,className:"".concat(t.rootPathRemaining," ").concat(t[l]),d:" M 50, 50 m -45, 0 a 45,45 0 1,0 90,0 a 45,45 0 1,0 -90,0 "})]})}),(0,v.jsx)("span",{id:"base-timer-label",className:t.rootLabel,children:function(e){var t=Math.floor(e/60),n=e%60;return n<10&&(n="0".concat(n)),"".concat(t,":").concat(n)}(e.timeLeft)})]})}var L=n(3168),S=n(3504),y=n(7482),N=(0,j.Z)((function(e){return{root:{position:"sticky",top:"-3%",padding:"2%",zIndex:2,width:"100%"},flexCenter:{display:"flex",justifyContent:"center"},rowPadding:{paddingTop:"3%"},stickyPadding:{paddingBottom:"3%"},progressIndicator:{fontSize:"36px"}}}));function M(e){var t=N(),n=(0,L.$)(),i=(0,r.Z)(n,1)[0];return(0,v.jsx)(h.Z,{className:t.root,children:(0,v.jsxs)(x.ZP,{container:!0,justifyContent:"space-around",alignItems:"center",children:[(0,v.jsxs)(x.ZP,{xs:12,md:4,item:!0,order:{xs:2,sm:1},className:t.stickyPadding,children:[e.isMobile&&e.params.isTime?null:(0,v.jsxs)("span",{className:t.progressIndicator,children:[e.operations.filter((function(e){return e.answer})).length,"/",e.operations.length]}),(0,v.jsx)(y.Z,{color:"primary",variant:"determinate",value:e.progress})]}),e.params.isTime?(0,v.jsx)(x.ZP,{item:!0,xs:12,md:4,order:{xs:1,sm:3},className:t.flexCenter+" "+t.stickyPadding,children:(0,v.jsx)(C,{start:e.start,end:e.end,timeLimit:e.timeLimit,timeLeft:e.timeLeft,setTimeLeft:e.setTimeLeft,isMobile:e.isMobile})}):null,(0,v.jsx)(x.ZP,{item:!0,xs:12,md:4,order:{xs:3,sm:2},className:(e.isMobile?t.rowPadding:"")+" "+t.stickyPadding,children:e.end?(0,v.jsx)(o.Fragment,{children:(0,v.jsx)(g.Z,{variant:"contained",component:S.rU,to:"/params",color:"primary",children:(0,v.jsx)(b.Z,{children:i("math.back")})})}):e.start&&e.countdownEnded&&!e.end?(0,v.jsx)(g.Z,{variant:"contained",color:"error",onClick:function(){e.setEnd(!0),e.setOpenCompletedDialog(!0)},children:(0,v.jsx)(b.Z,{color:"black",children:i("math.done")})}):(0,v.jsx)(g.Z,{variant:"contained",color:"success",onClick:function(){e.countdonwnStart||e.setCountdownStart(!0)},children:(0,v.jsx)(b.Z,{children:i("math.start")})})})]})})}var E=n(9515),T=n(6125),A=n(3208),P=(0,j.Z)((function(e){return{root:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",zIndex:3,fontSize:200}}}));function R(e){var t=P(),n=(0,o.useState)(),i=(0,r.Z)(n,2),a=i[0],s=i[1];return(0,o.useEffect)((function(){e.countdonwnStart&&s(0)}),[e.countdonwnStart]),(0,v.jsxs)("div",{className:t.root,children:[(0,v.jsx)(A.Z,{in:0===a,timeout:500,onEnter:function(){setTimeout((function(){s(null)}),1e3)},onExited:function(){return s(1)},unmountOnExit:!0,children:(0,v.jsx)("div",{children:"3"})}),(0,v.jsx)(A.Z,{in:1===a,timeout:500,onEnter:function(){setTimeout((function(){s(null)}),1e3)},onExited:function(){return s(2)},unmountOnExit:!0,children:(0,v.jsx)("div",{children:"2"})}),(0,v.jsx)(A.Z,{in:2===a,timeout:500,onEnter:function(){setTimeout((function(){s(null)}),1e3)},onExited:function(){return s(3)},unmountOnExit:!0,children:(0,v.jsx)("div",{children:"1"})}),(0,v.jsx)(A.Z,{in:3===a,timeout:500,onEnter:function(){setTimeout((function(){s(null)}),1e3)},onExited:function(){return e.setCountdownEnded(!0)},unmountOnExit:!0,children:(0,v.jsx)("div",{children:"GO!"})})]})}var O=n(1413),D=n(5931),F=n(3542),I=n(195),z=n(7123),B=o.forwardRef((function(e,t){return(0,v.jsx)(D.Z,(0,O.Z)({direction:"up",ref:t},e))})),W=(0,j.Z)((function(e){return{root:{textAlign:"center"},rightAnswers:{fontSize:"28px",color:e.palette.success.main},totalOperations:{fontSize:"28px",color:e.palette.primary.main}}}));function $(e){var t=W(),n=(0,L.$)().i18n,i=(0,L.$)(),a=(0,r.Z)(i,1)[0],s=function(){e.setOpenCompletedDialog(!1)};return(0,v.jsx)("div",{children:(0,v.jsxs)(F.Z,{open:e.openCompletedDialog,TransitionComponent:B,keepMounted:!0,onClose:s,"aria-describedby":"completed-dialog",children:[(0,v.jsxs)(I.Z,{className:t.root,children:[(0,v.jsx)(b.Z,{color:"primary",sx:{fontSize:"36px"},children:a("completed.title")}),(0,v.jsx)("p",{children:a("completed.result")}),(0,v.jsxs)("p",{children:[a("completed.resultText1")," ",function(){var r=e.operations.filter((function(e){return e.isRightAnswer})).length,i="fr"===n.language?r<=1:1===r;return(0,v.jsxs)(o.Fragment,{children:[(0,v.jsxs)("span",{className:t.rightAnswers,children:[r," "]}),a(i?"completed.resultText2singular":"completed.resultText2plural")]})}()," ",a("completed.resultText3")," ",(0,v.jsx)("span",{className:t.totalOperations,children:e.operations.length}),e.isTime?null:"!"]}),e.isTime?(0,v.jsxs)("p",{children:[a("completed.resultText4")," ",(0,v.jsx)("span",{className:t.rightAnswers,children:function(){var t=function(e){var t=Math.floor(e/3600),n=e%3600,r=Math.floor(n/60),o=n%60,i=Math.ceil(o);return{hours:t,minutes:r,seconds:i}}(e.totalTime);return(t.hours>0?"".concat(t.hours," ").concat(t.hours>1?a("completed.hours"):a("completed.hour")," "):"")+(t.minutes>0?"".concat(t.minutes," ").concat(t.minutes>1?a("completed.minutes"):a("completed.minute")," "):"")+"".concat(t.seconds," ").concat(t.seconds>1?a("completed.seconds"):a("completed.second"))}()}),"!"]}):null,(0,v.jsx)(b.Z,{color:"primary",sx:{fontSize:"36px"},children:function(){var t=e.operations.filter((function(e){return e.isRightAnswer})).length*(100/e.operations.length);return 100===t?a("completed.done5"):t>=80?a("completed.done4"):t>=60?a("completed.done3"):t>=40?a("completed.done2"):t<40?a("completed.done1"):void 0}()})]}),(0,v.jsx)(z.Z,{children:(0,v.jsx)(g.Z,{variant:"outlined",color:"primary",onClick:s,children:(0,v.jsx)(b.Z,{children:"Ok"})})})]})})}var q=n(8383),_=n(2065),G=n(9877),H=n(627),K=n(1672),U=(0,j.Z)((function(e){return{operation:{paddingBottom:"15px",display:"flex",alignItems:"baseline"},answerBox:{position:"relative",display:"flex",alignItems:"center",borderRadius:e.shape.borderRadius,transition:"2s",padding:"5px"},rightAnswer:{backgroundColor:(0,_.Fq)(e.palette.success.main,.3)},wrongAnswer:{backgroundColor:(0,_.Fq)(e.palette.error.main,.3)},textFieldBox:{width:"90px",flex:"0 0 auto"},answerFabContainer:{position:"absolute",top:0,right:0},negativeFab:{position:"absolute",right:"10px",bottom:"60px"}}}));function X(e){var t=U(),n=(0,K.u)(),i=(0,L.$)(),a=(0,r.Z)(i,1)[0],s=(0,o.useState)(0),c=(0,r.Z)(s,2),l=c[0],u=c[1],d=(0,o.useRef)([]);return(0,v.jsx)("form",{children:(0,v.jsxs)(x.ZP,{container:!0,justifyContent:"space-around",alignItems:"center",spacing:2,className:t.rowPadding,children:[e.operations.map((function(r,o){return(0,v.jsx)(x.ZP,{item:!0,className:t.operation,children:(0,v.jsxs)(h.Z,{className:!e.openCompletedDialog&&e.end?r.isRightAnswer?t.answerBox+" "+t.rightAnswer:t.answerBox+" "+t.wrongAnswer:t.answerBox,children:[(0,v.jsx)(h.Z,{children:r.operationText}),(0,v.jsx)(h.Z,{children:"\xa0=\xa0"}),(0,v.jsx)(h.Z,{className:t.textFieldBox,children:(0,v.jsx)(q.Z,{id:"input-"+o,label:a("params.numberLabel"),disabled:0===e.timeLeft||e.end,type:"number",variant:"outlined",color:"primary",inputRef:function(e){d.current[o]=e,e&&l===o&&e.focus()},onKeyPress:function(e){!function(e){"enter"===e.key.toLowerCase()&&(u(l+1),e.preventDefault())}(e)},onFocus:function(t){u(o),e.operationAnswer(t.target.value,r.id)},onChange:function(t){e.operationAnswer(t.target.value,r.id)}})}),(0,v.jsx)(H.Z,{in:!e.openCompletedDialog&&e.end&&!r.isRightAnswer,timeout:1e3,children:(0,v.jsx)(h.Z,{className:t.answerFabContainer,children:(0,v.jsx)(G.Z,{variant:"extended",sx:{backgroundColor:n.palette.success.main},size:"small","aria-label":"answer",children:r.rightAnswer})})})]})},"operation-"+o)})),(0,v.jsx)(H.Z,{in:e.params.negativeNumbers&&e.params.negativeButtonMobile&&e.isMobile&&!(0===e.timeLeft||e.end),timeout:1e3,children:(0,v.jsx)(h.Z,{className:t.negativeFab,children:(0,v.jsx)(G.Z,{color:"secondary","aria-label":"negative",sx:{fontSize:"48px",fontWeight:"bold"},onClick:function(){return function(){var e=d.current[l],t=e.value;e.value=Number(t?-1*t:-1),e.focus()}()},children:"-"})})})]})})}function J(e){return(0,v.jsxs)(o.Fragment,{children:[(0,v.jsx)(R,{countdonwnStart:e.countdonwnStart,setCountdownEnded:e.setCountdownEnded}),(0,v.jsx)(T.Z,{in:e.start&&e.countdownEnded,timeout:e.isMobile?1500:700,children:(0,v.jsx)(X,{operations:e.operations,operationAnswer:e.operationAnswer,timeLeft:e.timeLeft,end:e.end,params:e.params,isMobile:e.isMobile,openCompletedDialog:e.openCompletedDialog})}),(0,v.jsx)($,{openCompletedDialog:e.openCompletedDialog,setOpenCompletedDialog:e.setOpenCompletedDialog,operations:e.correctedOperations,totalTime:e.timeLimit-e.timeLeft,isTime:e.params.isTime})]})}function Q(e){var t=(0,o.useState)((function(){return s(e.params)})),n=(0,r.Z)(t,1)[0],c=(0,o.useState)([]),l=(0,r.Z)(c,2),u=l[0],d=l[1],m=(0,o.useState)(0),h=(0,r.Z)(m,2),x=h[0],g=h[1],b=(0,o.useState)(!1),j=(0,r.Z)(b,2),w=j[0],Z=j[1],k=(0,o.useState)(!1),C=(0,r.Z)(k,2),L=C[0],S=C[1],y=(0,o.useState)(!1),N=(0,r.Z)(y,2),T=N[0],A=N[1],P=function(e){var t=new Date(e),n=t.getHours(),r=t.getMinutes(),o=t.getSeconds();return(0,p.Z)(n)+(0,f.Z)(r)+o}(e.params.time),R=(0,o.useState)(P),O=(0,r.Z)(R,2),D=O[0],F=O[1],I=(0,o.useState)(!1),z=(0,r.Z)(I,2),B=z[0],W=z[1],$=(0,o.useState)(!1),q=(0,r.Z)($,2),_=q[0],G=q[1];return(0,o.useEffect)((function(){T&&Z(!0)}),[T]),(0,o.useEffect)((function(){_&&d(function(e){var t,n=(0,i.Z)(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;null===r.answer||""===r.answer?r.isRightAnswer=!1:(0,a.ku)(r.operation)===Number(r.answer)?r.isRightAnswer=!0:r.isRightAnswer=!1,r.rightAnswer=(0,a.ku)(r.operation)}}catch(o){n.e(o)}finally{n.f()}return e}(n))}),[_,n]),(0,v.jsxs)(o.Fragment,{children:[(0,v.jsx)(E.default,{componentType:E.dashboard,vh:"25vh",component:(0,v.jsx)(M,{params:e.params,operations:n,start:w,countdonwnStart:L,setCountdownStart:S,countdownEnded:T,timeLimit:P,timeLeft:D,setTimeLeft:F,setOpenCompletedDialog:W,end:_,setEnd:G,progress:x,isMobile:e.isMobile})}),(0,v.jsx)(E.default,{vh:"55vh",component:(0,v.jsx)(J,{isMobile:e.isMobile,params:e.params,operations:n,operationAnswer:function(e,t){n.find((function(e){return e.id===t})).answer=e,function(){var e=100/n.length,t=n.filter((function(e){return e.answer})).length;g(t*e)}()},countdonwnStart:L,countdownEnded:T,setCountdownEnded:A,start:w,end:_,timeLimit:P,timeLeft:D,openCompletedDialog:B,setOpenCompletedDialog:W,correctedOperations:u})})]})}},5042:function(){}}]);
//# sourceMappingURL=733.933fac49.chunk.js.map